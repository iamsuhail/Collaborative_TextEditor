{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Muhammad suhail/Desktop/realtime-code-editor-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Muhammad suhail/Desktop/realtime-code-editor-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Muhammad suhail\\\\Desktop\\\\realtime-code-editor-main\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";// Video.js\nimport React,{useEffect,useRef,useState}from'react';import Avatar from'react-avatar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Video=function Video(_ref){var socket=_ref.socket,roomId=_ref.roomId,username=_ref.username;var localVideoRef=useRef();var remoteVideoRef=useRef();var peerConnection=new RTCPeerConnection();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),videoEnabled=_useState2[0],setVideoEnabled=_useState2[1];useEffect(function(){// Get user media and display it locally\nnavigator.mediaDevices.getUserMedia({video:true,audio:true}).then(function(stream){localVideoRef.current.srcObject=stream;peerConnection.addStream(stream);}).catch(function(error){return console.error('Error accessing media devices:',error);});// Listen for remote stream and display it\npeerConnection.onaddstream=function(event){remoteVideoRef.current.srcObject=event.stream;};// Listen for ICE candidates and send them to the signaling server\npeerConnection.onicecandidate=function(event){if(event.candidate){socket.emit('ice-candidate',{roomId:roomId,candidate:event.candidate});}};// Listen for signaling events (offer, answer)\nsocket.on('offer',function(data){peerConnection.setRemoteDescription(new RTCSessionDescription(data.offer));peerConnection.createAnswer().then(function(answer){peerConnection.setLocalDescription(answer);socket.emit('answer',{roomId:roomId,answer:answer});}).catch(function(error){return console.error('Error creating answer:',error);});});socket.on('answer',function(data){peerConnection.setRemoteDescription(new RTCSessionDescription(data.answer));});// Create offer and emit it to the signaling server\npeerConnection.createOffer().then(function(offer){peerConnection.setLocalDescription(offer);socket.emit('offer',{roomId:roomId,offer:offer});}).catch(function(error){return console.error('Error creating offer:',error);});},[]);var toggleVideo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var videoTrack,stream;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:videoTrack=localVideoRef.current.srcObject.getVideoTracks()[0];if(!videoEnabled){_context.next=6;break;}// Disable video\nvideoTrack.enabled=false;setVideoEnabled(false);_context.next=17;break;case 6:_context.prev=6;_context.next=9;return navigator.mediaDevices.getUserMedia({video:true,audio:true});case 9:stream=_context.sent;localVideoRef.current.srcObject=stream;setVideoEnabled(true);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](6);console.error('Error accessing media devices:',_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[6,14]]);}));return function toggleVideo(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"videoContainer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"userName\",children:username}),/*#__PURE__*/_jsxs(\"div\",{className:\"videoFeature\",children:[videoEnabled?/*#__PURE__*/_jsx(\"video\",{className:\"videoFeature\",ref:localVideoRef,autoPlay:true,playsInline:true,muted:true}):/*#__PURE__*/_jsx(Avatar,{name:username,size:{height:200,width:190},round:\"1px\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleVideo,style:{backgroundColor:!videoEnabled?'#4aed88':' #E4312b'},children:videoEnabled?'Disable Video':'Enable Video'})]}),remoteVideoRef.current&&/*#__PURE__*/_jsx(\"video\",{className:\"videoFeature\",ref:remoteVideoRef,autoPlay:true,playsInline:true})]});};export default Video;","map":{"version":3,"sources":["C:/Users/Muhammad suhail/Desktop/realtime-code-editor-main/src/components/Video.js"],"names":["React","useEffect","useRef","useState","Avatar","Video","socket","roomId","username","localVideoRef","remoteVideoRef","peerConnection","RTCPeerConnection","videoEnabled","setVideoEnabled","navigator","mediaDevices","getUserMedia","video","audio","then","stream","current","srcObject","addStream","catch","error","console","onaddstream","event","onicecandidate","candidate","emit","on","data","setRemoteDescription","RTCSessionDescription","offer","createAnswer","answer","setLocalDescription","createOffer","toggleVideo","videoTrack","getVideoTracks","enabled","height","width","backgroundColor"],"mappings":"4bAAA;AAEA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,C,wFACA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAkC,IAA/BC,CAAAA,MAA+B,MAA/BA,MAA+B,CAAvBC,MAAuB,MAAvBA,MAAuB,CAAfC,QAAe,MAAfA,QAAe,CAC5C,GAAMC,CAAAA,aAAa,CAAGP,MAAM,EAA5B,CACA,GAAMQ,CAAAA,cAAc,CAAGR,MAAM,EAA7B,CACA,GAAMS,CAAAA,cAAc,CAAG,GAAIC,CAAAA,iBAAJ,EAAvB,CACA,cAAwCT,QAAQ,CAAC,IAAD,CAAhD,wCAAOU,YAAP,eAAqBC,eAArB,eAGAb,SAAS,CAAC,UAAM,CACZ;AACAc,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC,CAAEC,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,IAAtB,CAApC,EACKC,IADL,CACU,SAACC,MAAD,CAAY,CACdZ,aAAa,CAACa,OAAd,CAAsBC,SAAtB,CAAkCF,MAAlC,CACAV,cAAc,CAACa,SAAf,CAAyBH,MAAzB,EACH,CAJL,EAKKI,KALL,CAKW,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACD,KAAR,CAAc,gCAAd,CAAgDA,KAAhD,CAAX,EALX,EAOA;AACAf,cAAc,CAACiB,WAAf,CAA6B,SAACC,KAAD,CAAW,CACpCnB,cAAc,CAACY,OAAf,CAAuBC,SAAvB,CAAmCM,KAAK,CAACR,MAAzC,CACH,CAFD,CAIA;AACAV,cAAc,CAACmB,cAAf,CAAgC,SAACD,KAAD,CAAW,CACvC,GAAIA,KAAK,CAACE,SAAV,CAAqB,CACjBzB,MAAM,CAAC0B,IAAP,CAAY,eAAZ,CAA6B,CAAEzB,MAAM,CAANA,MAAF,CAAUwB,SAAS,CAAEF,KAAK,CAACE,SAA3B,CAA7B,EACH,CACJ,CAJD,CAMA;AACAzB,MAAM,CAAC2B,EAAP,CAAU,OAAV,CAAmB,SAACC,IAAD,CAAU,CACzBvB,cAAc,CAACwB,oBAAf,CAAoC,GAAIC,CAAAA,qBAAJ,CAA0BF,IAAI,CAACG,KAA/B,CAApC,EACA1B,cAAc,CAAC2B,YAAf,GACKlB,IADL,CACU,SAACmB,MAAD,CAAY,CACd5B,cAAc,CAAC6B,mBAAf,CAAmCD,MAAnC,EACAjC,MAAM,CAAC0B,IAAP,CAAY,QAAZ,CAAsB,CAAEzB,MAAM,CAANA,MAAF,CAAUgC,MAAM,CAANA,MAAV,CAAtB,EACH,CAJL,EAKKd,KALL,CAKW,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACD,KAAR,CAAc,wBAAd,CAAwCA,KAAxC,CAAX,EALX,EAMH,CARD,EAUApB,MAAM,CAAC2B,EAAP,CAAU,QAAV,CAAoB,SAACC,IAAD,CAAU,CAC1BvB,cAAc,CAACwB,oBAAf,CAAoC,GAAIC,CAAAA,qBAAJ,CAA0BF,IAAI,CAACK,MAA/B,CAApC,EACH,CAFD,EAIA;AACA5B,cAAc,CAAC8B,WAAf,GACKrB,IADL,CACU,SAACiB,KAAD,CAAW,CACb1B,cAAc,CAAC6B,mBAAf,CAAmCH,KAAnC,EACA/B,MAAM,CAAC0B,IAAP,CAAY,OAAZ,CAAqB,CAAEzB,MAAM,CAANA,MAAF,CAAU8B,KAAK,CAALA,KAAV,CAArB,EACH,CAJL,EAKKZ,KALL,CAKW,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACD,KAAR,CAAc,uBAAd,CAAuCA,KAAvC,CAAX,EALX,EAOH,CA5CQ,CA4CN,EA5CM,CAAT,CA8CA,GAAMgB,CAAAA,WAAW,2FAAG,yJACVC,UADU,CACGlC,aAAa,CAACa,OAAd,CAAsBC,SAAtB,CAAgCqB,cAAhC,GAAiD,CAAjD,CADH,KAEZ/B,YAFY,yBAGZ;AACA8B,UAAU,CAACE,OAAX,CAAqB,KAArB,CACA/B,eAAe,CAAC,KAAD,CAAf,CALY,oEASaC,CAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC,CAAEC,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,IAAtB,CAApC,CATb,QASFE,MATE,eAURZ,aAAa,CAACa,OAAd,CAAsBC,SAAtB,CAAkCF,MAAlC,CACAP,eAAe,CAAC,IAAD,CAAf,CAXQ,iFAaRa,OAAO,CAACD,KAAR,CAAc,gCAAd,cAbQ,qEAAH,kBAAXgB,CAAAA,WAAW,2CAAjB,CAyBA,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,aAAM,SAAS,CAAC,UAAhB,UAA4BlC,QAA5B,EADJ,cAEI,aAAK,SAAS,CAAC,cAAf,WACKK,YAAY,cACT,cAAO,SAAS,CAAC,cAAjB,CAAgC,GAAG,CAAEJ,aAArC,CAAoD,QAAQ,KAA5D,CAA6D,WAAW,KAAxE,CAAyE,KAAK,KAA9E,EADS,cAGT,KAAC,MAAD,EAAQ,IAAI,CAAED,QAAd,CAAwB,IAAI,CAAE,CAAEsC,MAAM,CAAE,GAAV,CAAeC,KAAK,CAAE,GAAtB,CAA9B,CAA2D,KAAK,CAAC,KAAjE,EAJR,cAMI,eAAQ,OAAO,CAAEL,WAAjB,CAA8B,KAAK,CAAE,CAAEM,eAAe,CAAE,CAACnC,YAAD,CAAgB,SAAhB,CAA4B,UAA/C,CAArC,UACKA,YAAY,CAAG,eAAH,CAAqB,cADtC,EANJ,GAFJ,CAYKH,cAAc,CAACY,OAAf,eAA0B,cAAO,SAAS,CAAC,cAAjB,CAAgC,GAAG,CAAEZ,cAArC,CAAqD,QAAQ,KAA7D,CAA8D,WAAW,KAAzE,EAZ/B,GADJ,CAgBH,CA9FD,CAgGA,cAAeL,CAAAA,KAAf","sourcesContent":["// Video.js\r\n\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport Avatar from 'react-avatar';\r\nconst Video = ({ socket, roomId, username }) => {\r\n    const localVideoRef = useRef();\r\n    const remoteVideoRef = useRef();\r\n    const peerConnection = new RTCPeerConnection();\r\n    const [videoEnabled, setVideoEnabled] = useState(true);\r\n\r\n\r\n    useEffect(() => {\r\n        // Get user media and display it locally\r\n        navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n            .then((stream) => {\r\n                localVideoRef.current.srcObject = stream;\r\n                peerConnection.addStream(stream);\r\n            })\r\n            .catch((error) => console.error('Error accessing media devices:', error));\r\n\r\n        // Listen for remote stream and display it\r\n        peerConnection.onaddstream = (event) => {\r\n            remoteVideoRef.current.srcObject = event.stream;\r\n        };\r\n\r\n        // Listen for ICE candidates and send them to the signaling server\r\n        peerConnection.onicecandidate = (event) => {\r\n            if (event.candidate) {\r\n                socket.emit('ice-candidate', { roomId, candidate: event.candidate });\r\n            }\r\n        };\r\n\r\n        // Listen for signaling events (offer, answer)\r\n        socket.on('offer', (data) => {\r\n            peerConnection.setRemoteDescription(new RTCSessionDescription(data.offer));\r\n            peerConnection.createAnswer()\r\n                .then((answer) => {\r\n                    peerConnection.setLocalDescription(answer);\r\n                    socket.emit('answer', { roomId, answer });\r\n                })\r\n                .catch((error) => console.error('Error creating answer:', error));\r\n        });\r\n\r\n        socket.on('answer', (data) => {\r\n            peerConnection.setRemoteDescription(new RTCSessionDescription(data.answer));\r\n        });\r\n\r\n        // Create offer and emit it to the signaling server\r\n        peerConnection.createOffer()\r\n            .then((offer) => {\r\n                peerConnection.setLocalDescription(offer);\r\n                socket.emit('offer', { roomId, offer });\r\n            })\r\n            .catch((error) => console.error('Error creating offer:', error));\r\n\r\n    }, []);\r\n\r\n    const toggleVideo = async () => {\r\n        const videoTrack = localVideoRef.current.srcObject.getVideoTracks()[0];\r\n        if (videoEnabled) {\r\n            // Disable video\r\n            videoTrack.enabled = false;\r\n            setVideoEnabled(false);\r\n        } else {\r\n            // Enable video\r\n            try {\r\n                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\r\n                localVideoRef.current.srcObject = stream;\r\n                setVideoEnabled(true);\r\n            } catch (error) {\r\n                console.error('Error accessing media devices:', error);\r\n            }\r\n        }\r\n    };\r\n\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n\r\n    return (\r\n        <div className='videoContainer' >\r\n            <span className=\"userName\">{username}</span>\r\n            <div className='videoFeature'>\r\n                {videoEnabled ? (\r\n                    <video className='videoFeature' ref={localVideoRef} autoPlay playsInline muted />\r\n                ) : (\r\n                    <Avatar name={username} size={{ height: 200, width: 190 }} round=\"1px\" />\r\n                )}\r\n                <button onClick={toggleVideo} style={{ backgroundColor: !videoEnabled ? '#4aed88' : ' #E4312b' }}>\r\n                    {videoEnabled ? 'Disable Video' : 'Enable Video'}\r\n                </button>\r\n            </div>\r\n            {remoteVideoRef.current && <video className='videoFeature' ref={remoteVideoRef} autoPlay playsInline />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Video;\r\n"]},"metadata":{},"sourceType":"module"}